(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){e.exports=n(22)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n.n(a),l=n(11),o=n.n(l),s=(n(7),n(18),n(9)),c=n(1),u=n(2),p=n(3),h=n(6),y=n(4),m=n(5),f=function(e){var t=e.children;return i.a.createElement("div",{className:"row justify-content-center"},t)},d=function(e){var t=e.children;return i.a.createElement("div",{className:"container"},t)},v=function(e){var t=e.children,n=e.onClick;return i.a.createElement("button",{onClick:n,className:"button col-xl-6 col-sm-8 col-xxs-10"},t)},b=n(8),S=(n(19),function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.value!==this.props.value}},{key:"render",value:function(){var e=this.props,n=e.value,r=e.enemy,a=e.onClick;return i.a.createElement("td",{className:"square ".concat(t.calculateClass(n,r)),onClick:a})}}],[{key:"calculateClass",value:function(e,t){switch(e){case"empty":return"";case"boat":return t?"":"boat";case"killed":return"killed";case"miss":return"miss"}}}]),t}(a.Component)),w=(n(20),function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return(n=Object(h.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(a)))).renderSquare=function(e){var t=n.props,r=t.squares,a=t.enemy,l=t.onClick;return i.a.createElement(S,{key:e,value:r[e],enemy:a,onClick:l.bind(Object(b.a)(n),e)})},n.divideToRows=function(e){for(var t=[],r=function(r){var a=e.slice(r,r+10).map(function(e,t){return n.renderSquare(t+r)});t.push(a)},a=0;a<100;a+=10)r(a);return t},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=[1,2,3,4,5,6,7,8,9,10],t=["","a","b","c","d","e","f","g","h","i","j"].map(function(e,t){return i.a.createElement("th",{key:e},e)}),n=this.divideToRows(this.props.squares).map(function(t,n){return i.a.createElement("tr",{key:n},i.a.createElement("th",null,e[n]),t)});return i.a.createElement("table",{className:"board"},i.a.createElement("tbody",null,i.a.createElement("tr",null,t),n))}}]),t}(a.Component)),O=(r=w,function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(e){n.props.build(e)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(r,Object.assign({className:"col",squares:this.props.squares,onClick:function(t){return e.handleClick(t)},enemy:!1},this.props))}}]),t}(a.Component));var j=function(e){return function(t){function n(){var e,t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=Object(h.a)(this,(e=Object(y.a)(n)).call.apply(e,[this].concat(a)))).handleClick=function(e){t.props.onClick(e)},t}return Object(m.a)(n,t),Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.build()}},{key:"componentDidUpdate",value:function(){this.props.turn()}},{key:"render",value:function(){return i.a.createElement(e,Object.assign({className:"col",squares:this.props.squares,onClick:this.handleClick,enemy:!0},this.props))}}]),n}(a.Component)}(w);n(21);var E=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.winner,r=t.playerFreePoints;if(n)return i.a.createElement("div",{className:"tooltip "},i.a.createElement("div",null,"Enemy"===n?"Sorry but...":"Congratulations!"),i.a.createElement("div",null,n," wins!"));for(var a in r)if(r.hasOwnProperty(a)&&(0!==r[a].length&&(e=a),!e))return i.a.createElement("div",{className:"tooltip green"},i.a.createElement("div",null,"Now you can play!"),i.a.createElement("div",null,"Your turn!"));var l=r[e].length,o=[1,2,3,4][Object.keys(r).indexOf(e)];return i.a.createElement("div",{className:"tooltip orange"},i.a.createElement("p",null,"Click on ",o," ",o>1?"adjacent":""," square",o>1?"s":""," to build ",e,"."),i.a.createElement("p",null,"Now you can build ",l>0?l:""," ship",l>1?"s":""," of this type."))}}]),t}(a.Component);function k(e){var t=Math.min.apply(Math,Object(c.a)(e)),n=Math.max.apply(Math,Object(c.a)(e)),r=[],a=n-t;return 0===a?(r=[t-10,t+10],q(t)||(r=r.concat([t-1])),C(t)||(r=r.concat([t+1]))):1===a||2===a||3===a?(q(t)||(r=r.concat([t-1])),C(n)||(r=r.concat([n+1]))):10!==a&&20!==a&&30!==a||(r=[t-=10,n+=10]),A(r,0,100)}function g(e){var t=Math.min.apply(Math,Object(c.a)(e)),n=Math.max.apply(Math,Object(c.a)(e)),r=[t-10,t+10];q(t)||(r=r.concat([t-1,t-11,t+9])),C(t)||(r=r.concat([t+1,t+11,t-9]));var a=n-t;return a<=30&&(r=r.concat([n-10,n+10]),q(n)||(r=r.concat([n-1,n-11,n+9])),C(n)||(r=r.concat([n+1,n+11,n-9]))),a>0&&a<=3&&(r=r.filter(function(e){return e!==n-1&&e!==t+1})),a>=10&&a<=30&&(r=r.filter(function(e){return e!==n-10&&e!==t+10})),r=(r=A(r,0,100)).filter(function(e,t){return r.indexOf(e)===t})}function q(e){return[0,10,20,30,40,50,60,70,80,90].some(function(t){return t===e})}function C(e){return[9,19,29,39,49,59,69,79,89,99].some(function(t){return t===e})}function A(e,t,n){return e.filter(function(e){return e>=t&&e<n})}var P=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(h.a)(this,Object(y.a)(t).call(this,e))).state={playerSquares:new Array(100).fill("empty"),enemySquares:new Array(100).fill("empty"),playerFreePoints:{vedette:[1,1,1,1],destroyer:[2,2,2],cruiser:[3,3],battleship:[4]},playerTurn:null,winner:""},n.resetGameProperties=function(){n.player={currentShipForBuild:[],reservedSquares:[],availableVals:Array.from(new Array(100).keys()),builtShips:[],ships:Object.getOwnPropertyNames(n.state.playerFreePoints)},n.player.shipKey=n.player.ships.length-1,n.player.currentShip=n.player.ships[n.player.shipKey],n.enemy={squares:new Array(100).fill("empty"),freePoints:{vedette:[1,1,1,1],destroyer:[2,2,2],cruiser:[3,3],battleship:[4]},currentShipForBuild:[],reservedSquares:[],availableVals:Array.from(new Array(100).keys()),builtShips:{vedette:[],destroyer:[],cruiser:[],battleship:[]},builtShipsCopy:{},aliveShipsAmount:10,currentShipForKill:[],alreadyShot:[],squaresForShot:Array.from(new Array(100).keys())},n.enemy.ships=Object.getOwnPropertyNames(n.enemy.freePoints),n.enemy.shipKey=n.enemy.ships.length-1,n.enemy.currentShip=n.enemy.ships[n.enemy.shipKey]},n.startNewGame=function(){n.setState({playerSquares:new Array(100).fill("empty"),enemySquares:new Array(100).fill("empty"),playerFreePoints:{vedette:[1,1,1,1],destroyer:[2,2,2],cruiser:[3,3],battleship:[4]},playerTurn:null,winner:""},function(){n.resetGameProperties(),n.buildEnemyShips()})},n.buildPlayerShips=function(e){var t=n.player.availableVals;t&&(0===t.length&&(alert("Your ship building deadlocked. Your board will be cleaned!"),n.startNewGame()),t.includes(e)&&n.build(e,!0))},n.buildEnemyShips=function(){for(;n.enemy.freePoints.vedette.length;){var e=n.enemy.availableVals,t=e[Math.floor(Math.random()*e.length)];if(isNaN(t))return void n.startNewGame();n.build(t,!1)}},n.build=function(e,t){var r,a,i;t?(r=n.player,a=Object(c.a)(n.state.playerSquares),i=Object(s.a)({},n.state.playerFreePoints)):(r=n.enemy,a=Object(c.a)(n.enemy.squares),i=Object(s.a)({},n.enemy.freePoints));var l=i[r.currentShip],o=l[l.length-1];r.currentShipForBuild.push(e);var u=k(r.currentShipForBuild);if(r.availableVals=u.filter(function(e){return!r.reservedSquares.includes(e)}),a[e]="boat",t?n.setState({playerSquares:a}):n.enemy.squares=a,o--,l.pop(),o<1){var p,h=g(r.currentShipForBuild);if(r.reservedSquares=[].concat(Object(c.a)(r.reservedSquares),Object(c.a)(r.currentShipForBuild),Object(c.a)(h)),t?(r.builtShips=[].concat(Object(c.a)(r.builtShips),Object(c.a)(r.currentShipForBuild)),p=n.state.playerFreePoints.vedette):(r.builtShips[r.currentShip].push(r.currentShipForBuild),r.builtShipsCopy=JSON.parse(JSON.stringify(r.builtShips)),p=n.enemy.freePoints.vedette),Math.max.apply(Math,Object(c.a)(p))<1)return void(t?(n.player.availableVals=null,n.setState({playerTurn:!0})):n.setState({enemySquares:n.enemy.squares}));r.currentShipForBuild=[];var y=Array.from(new Array(100).keys());r.availableVals=y.filter(function(e){return!r.reservedSquares.includes(e)}),0===l.length&&(r.shipKey--,r.currentShip=r.ships[r.shipKey])}else l.push(o),t?n.setState({freePoints:i}):r.freePoints=i},n.handleEnemyBoardClick=function(e){var t=n.state,r=t.winner,a=t.playerTurn,i=t.enemySquares;if(!r){var l=i.slice();if(a)if("boat"===l[e]){l[e]="killed";var o=n.enemy.builtShips,s=function(t){if(o.hasOwnProperty(t)){var r=o[t];r.forEach(function(a){a.forEach(function(i){if(i===e){var o=a.indexOf(i);if(a.splice(o,1),a.length<1){var s=r.indexOf(a);g(n.enemy.builtShipsCopy[t][s]).forEach(function(e){l[e]="miss"}),n.enemy.aliveShipsAmount--}}})})}};for(var c in o)s(c);n.setState({enemySquares:l}),n.enemy.aliveShipsAmount||n.setState({winner:"Player"})}else"empty"===l[e]&&(l[e]="miss",n.setState({enemySquares:l,playerTurn:!1}))}},n.letEnemyTurn=function(){var e=n.state,t=e.winner,r=e.playerTurn,a=e.playerSquares;if(!t)for(var i,l,o=a.slice(),s=function(){var e=n.enemy,a=e.squaresForShot,s=e.currentShipForKill,u=e.alreadyShot,p=a[Math.floor(Math.random()*a.length)];if("boat"===o[p]){o[p]="killed";var h=n.player.builtShips,y=h.indexOf(o[p]);if(h.splice(y,1),h.length<1&&(t="Enemy",n.setState({winner:t})),n.player.builtShips=h,s.push(p),i=k(s),l=!i.some(function(e){return"boat"===o[e]}),u.push(p),l){var m=g(s);u=[].concat(Object(c.a)(u),Object(c.a)(m)),m.forEach(function(e){o[e]="miss"}),a=Array.from(new Array(100).keys()),s=[]}else a=i}else"empty"===o[p]&&(u.push(p),s.length<1&&(a=Array.from(new Array(100).keys())),o[p]="miss",r=!0);a=a.filter(function(e){return!u.includes(e)}),n.enemy.squaresForShot=a,n.enemy.currentShipForKill=s,n.enemy.alreadyShot=u,n.setState({playerTurn:r,playerSquares:o})};!t&&!1===r;)s()},n.resetGameProperties(),n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.playerFreePoints,n=e.winner,r=e.playerSquares,a=e.enemySquares;return i.a.createElement(i.a.Fragment,null,i.a.createElement("main",null,i.a.createElement(d,null,i.a.createElement(f,null,i.a.createElement(E,{playerFreePoints:t,winner:n})),i.a.createElement(f,null,i.a.createElement(O,{squares:r,onClick:this.buildPlayerShips}),i.a.createElement(j,{squares:a,build:this.buildEnemyShips,turn:this.letEnemyTurn,onClick:this.handleEnemyBoardClick})),i.a.createElement(f,null,i.a.createElement(v,{onClick:this.startNewGame},"Clean boards and start New Game")))))}}]),t}(a.Component),N=function(e){var t=e.heading;return i.a.createElement("header",null,i.a.createElement(d,null,i.a.createElement(f,null,i.a.createElement("h1",{className:"header col-xl-12"},t))))},F=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(N,{heading:"Sea Battle"}),i.a.createElement(P,null))},M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(i.a.createElement(F,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");M?(function(e,t){fetch(e).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):x(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):x(t,e)})}}()}],[[12,1,2]]]);
//# sourceMappingURL=main.420b727a.chunk.js.map