(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(41)},20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(8),i=n.n(r),s=(n(20),n(21),function(e){var t=e.children;return o.a.createElement("div",{className:"wrapper"},t)});s.defaultProps={children:null};var c=s,l=(n(22),function(e){var t=e.text;return o.a.createElement("header",null,o.a.createElement("h1",{className:"title"},t))});l.defaultProps={text:"Simple text"};var u=l,p=n(3),d=n.n(p),g=n(4),m=n(5),f=n(9),v=n(10),h=n(13),P=n(11),b=n(14),y=n(2),O=n(12),E=n.n(O),j=(n(36),function(e){var t=e.value,n=e.handleInputChange,a=e.onEnterPress,r=e.tooltip;return o.a.createElement(o.a.Fragment,null,r&&o.a.createElement("div",{className:"tooltip"},"not found"),o.a.createElement("input",{type:"text",className:"input",value:t,onChange:n,onKeyPress:a,placeholder:"Search...",autoFocus:!0}))});j.defaultProps={value:"",handleInputChange:function(){},onEnterPress:function(){},tooltip:!1};var C=o.a.memo(j),M=(n(37),function(e){var t=e.value,n=e.id,a=e.deletePoint;return o.a.createElement("div",{className:"point",id:n},o.a.createElement("span",{className:"pointName"},t),o.a.createElement("i",{className:"fas fa-times",onClick:function(e){return a(n,e)}}))});M.defaultProps={value:"",id:0,deletePoint:function(){}};var x=M,w=function(e){var t=e.points,n=e.deletePoint;return o.a.createElement("div",{className:"pointList"},t.map(function(e){var t=e.geoObject.properties.get("name");return o.a.createElement(x,{key:e.id,value:t,id:e.id,deletePoint:n})}))};w.defaultProps={points:[],deletePoint:function(){}};var D=o.a.memo(w),k=(n(38),function(){return o.a.createElement("div",{className:"map",id:"map"})}),N=(n(39),window.ymaps),S=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(h.a)(this,Object(P.a)(t).call(this,e))).initMap=function(){n.yaMap=new N.Map("map",{center:[55.75,37.57],zoom:12})},n.updateMap=function(){n.yaMap.setCenter(n.toCenter),n.paintPolyline()},n.addPoint=Object(m.a)(d.a.mark(function e(){var t,a,o,r,i,s,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.inputText,o=t.points,e.prev=1,e.next=4,N.geocode(a,{results:1,boundedBy:n.yaMap.getBounds()});case 4:return i=e.sent,e.next=7,i.geoObjects.get(0);case 7:r=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),alert(e.t0);case 13:r?(s=n.createPointObj(r),c=s.geoObject,n.yaMap.geoObjects.add(c),n.addDragEventsOnMapPoint(s),n.toCenter=c.geometry.getCoordinates(),n.setState({inputText:"",points:[].concat(Object(g.a)(o),[s]),tooltip:!1},n.updateMap)):n.setState({inputText:"",tooltip:!0});case 14:case"end":return e.stop()}},e,null,[[1,10]])})),n.addDragEventsOnMapPoint=function(e){var t=e.geoObject;t.events.add("dragstart",n.onMapPointDragStart),n.onMapPointDragEnd=n.changePoint.bind(Object(y.a)(Object(y.a)(n)),e),t.events.add("dragend",n.onMapPointDragEnd)},n.changePoint=function(){var e=Object(m.a)(d.a.mark(function e(t){var a,o,r,i,s,c,l,u,p,m,f,v;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.geoObject,o=t.id,r=a.geometry.getCoordinates(),e.prev=2,e.next=5,N.geocode(r);case 5:return s=e.sent,e.next=8,s.geoObjects.get(0);case 8:i=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),alert(e.t0);case 14:i&&(c=i.properties.get("name"),l=i.properties.get("balloonContent"),u=i.geometry.getCoordinates(),a.properties.set("balloonContent",l),a.properties.set("name",c),a.geometry.setCoordinates(u),p={geoObject:a,id:o},m=n.state.points,f=Object(g.a)(m),v=f.findIndex(function(e){return e.id===o}),f[v]=p,n.setState({points:f},n.paintPolyline));case 15:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),n.deletePoint=function(e){var t=n.state.points,a=t.find(function(t){return t.id===e}),o=t.filter(function(t){return t.id!==e});if(o.length){var r=o[o.length-1].geoObject;n.toCenter=r.geometry.getCoordinates()}var i=a.geoObject;i.events.remove("dragstart",n.onMapPointDragStart),i.events.remove("dragend",n.onMapPointDragEnd),n.yaMap.geoObjects.remove(i),n.setState({points:o},n.updateMap)},n.onPointListDrop=function(e,t,a,o){var r,i=+e.getAttribute("id"),s=n.state.points,c=s.find(function(e){return e.id===i}),l=s.indexOf(c);if(o){var u=+o.getAttribute("id");r=s.findIndex(function(e){return e.id===u})}else r=s.length;var p=Object(g.a)(s);delete p[l],p.splice(r,0,c);var d=p.filter(function(e){return e});n.toCenter=c.geoObject.geometry.getCoordinates(),n.setState({points:d},n.updateMap)},n.onMapPointDragStart=function(){n.deleteOldPolyline()},n.createPointObj=function(e){var t=(new Date).getTime();return{geoObject:new N.GeoObject({geometry:{type:"Point",coordinates:e.geometry.getCoordinates()},properties:{name:e.properties.get("name"),hintContent:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u043c\u0435\u0442\u043a\u0443 \u043f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438",balloonContent:e.properties.get("balloonContent")}},{draggable:!0}),id:t}},n.paintPolyline=function(){n.deleteOldPolyline();var e=n.state.points.map(function(e){return e.geoObject.geometry.getCoordinates()}),t=new N.Polyline(e,{balloonContent:"Route"},{strokeColor:"#000000",strokeWidth:6,strokeOpacity:.5});n.yaMap.geoObjects.add(t),n.route=t},n.handleInputChange=function(e){var t=e.target.value;n.setState({inputText:t})},n.onEnterPress=function(e){var t=e.key;""!==n.state.inputText&&"Enter"===t&&n.addPoint()},n.state={inputText:"",points:[],tooltip:!1},n.toCenter=[],n.route=null,n.yaMap=null,n.dragAndDrop=null,n.onMapPointDragEnd=null,n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){try{N.ready(this.initMap)}catch(e){alert(e)}this.initDNDonPointsList()}},{key:"initDNDonPointsList",value:function(){var e=document.querySelector(".pointList");this.dragAndDrop=E()([e]),this.dragAndDrop.on("drop",this.onPointListDrop)}},{key:"deleteOldPolyline",value:function(){this.yaMap.geoObjects.remove(this.route),this.route=null}},{key:"render",value:function(){var e=this.state,t=e.inputText,n=e.tooltip,a=e.points;return o.a.createElement("main",{className:"main"},o.a.createElement("div",{className:"pointsWrap"},o.a.createElement(C,{value:t,handleInputChange:this.handleInputChange,onEnterPress:this.onEnterPress,tooltip:n}),o.a.createElement(D,{points:a,deletePoint:this.deletePoint})),o.a.createElement(k,null))}}]),t}(a.Component),I=(n(40),function(){return o.a.createElement(c,null,o.a.createElement(u,{text:"Route Editor"}),o.a.createElement(S,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,1,2]]]);
//# sourceMappingURL=main.5f8c443d.chunk.js.map